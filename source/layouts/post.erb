<% wrap_layout :layout do %>
  <% content_for :head do %>
    <% description = ERB::Util.html_escape(strip_tags(current_article.body.split("\n").first)) %>

    <meta name="description" content="<%= description %>">

    <meta property="og:type" content="article">
    <meta property="og:url" content="<%= current_article.url %>">
    <meta property="og:title" content="<%= current_article.title %>">
    <meta property="og:description" content="<%= description %>">
    <meta property="og:site_name" content="Anti-pattern">

    <meta property="article:published_time" content="<%= current_article.date.to_time.iso8601 %>">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@brandonweiss">

    <link rel="canonical" href="<%= current_article.url %>">
  <% end %>

  <%= partial "post", locals: { post: current_article } %>

  <%= partial "pagination", locals: { older_post: current_article.article_previous, newer_post: current_article.article_next } %>

  <footer class="center">
    <%= link_to "Read more posts in the archive", config[:archive_path], class: "button" %>
  </footer>
<% end %>
